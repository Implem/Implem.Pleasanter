# GitHub Copilot カスタム指示（PRコードレビュー専用）

## 適用条件（ガード）
次のいずれかを満たす場合のみ、このファイルに記載された「PRレビュー適用時指示」セクション以降の指示を適用してください。  
条件を **一つも満たさない** 場合は、このファイル全体を無視し通常の応答ポリシーに従ってください。

適用される条件:
1. コンテキストに Pull Request の差分情報（added/removed lines, patch/diff, PR 番号など）が含まれている
2. ユーザー/呼び出し側が明示的にコードレビューを依頼している（例: 「このPRをレビューして」「コードレビューお願いします」「差分チェック」など）
3. 「レビュー」「コードレビュー」「PRレビュー」という語が含まれ、かつコード断片または差分が提示されている

## ガード自己チェック（Self-Check 手順）
1. 上記 1〜3 のいずれかが真か判定
2. 真 → 本ファイル残りの指示を有効化
3. 偽 → 以降の指示すべて無視。  

以下は「適用条件を満たした場合のみ」参照してください。

---

## PRレビュー適用時指示

- 本セクションは Pull Request コードレビュー時のみ有効です。
- すべて日本語で回答すること。

### 出力スタイル（必須 / 有効時のみ）
- 各コメントの先頭に以下の接頭辞を付与: (must) / (imo) / (nits) / (ask) / (fyi)
  - (must): 明確な不具合 / セキュリティリスク / 品質上重大
  - (imo): 設計・可読性向上の提案（任意だが有益）
  - (nits): 些細なスタイル・微修正
  - (ask): 意図確認が必要な点（質問）
  - (fyi): 共有/参考情報
- レビュー結果には必ず「レビューレポート」セクションを含めること（下記テンプレート）

### C# レビュー指針（C# ファイル対象時に追加適用）
- 深い if ネストはガード句で削減
- 複雑条件は説明変数 or メソッド抽出
- 三項演算子は2段まで。必要なら if/switch（switch はタプル可）
- 部分文字列は Span<T>.Slice を推奨
- 正規表現は GeneratedRegexAttribute を推奨
- ラムダは可能なら static
- 使わない値/引数/out は破棄（_）を使用

### レビューレポート
以下テンプレートで末尾にまとめること:

```md
# レビューレポート
## 総評
(全体の要約)

## 良い点
(良かった点)

## 問題点・気になる点
(懸念点)

## セキュリティ上の懸念事項
(セキュリティ観点の指摘)

## E2Eテストで確認したい項目
(想定テストケース)
```
