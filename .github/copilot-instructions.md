# GitHub Copilot カスタム指示

## 前提条件
コードレビューを行う際には、必ずこのカスタム指示に従ってください。
コードレビューでない場合は無視してください。

## 使用言語
全て日本語で記載してください。

## レビューコメントのラベル
レビューの内容に応じて、コメントの先頭に下記の接頭辞`(xxxx): `を付けてください。

- (must): かならず変更してね  
- (imo): 自分の意見だとこうだけど修正必須ではないよ(in my opinion)  
- (nits): ささいな指摘(nitpick) 
- (ask): 質問
- (fyi): 参考情報

## C#コーディングガイドライン
C#のソースコードについてのみ、下記ガイドラインを参照してレビューしてください。

### 1. 推奨しないコード

#### ネストの深すぎるif文
- if文のネストが深くなったら、早期リターン（ガード句）を活用してできるだけネストを減らす

#### 多重論理式
- 条件文が複雑になるときは、一旦、説明的なローカル変数に格納して意図を明確にする
- 同じ条件が複数個所で利用される場合はメソッドに切り出すことを検討する

#### ３項演算子の乱用
- 三項演算子を使う場合は、明確で短い条件に限定し、入れ子構造を避ける（多くて２段までとする）
- If文やSwitch式を使用した方が意図が明確になるケースでは、それらの利用も考える
- より簡潔に記述できる場合は、switch式の条件にタプルを使っても良い

### 2. 推奨コード

#### 部分文字列の取得には`Span<T>`の`Slice`を使う
- `Substring()`メソッドに比べメモリアロケーションが無く高速

#### 正規表現利用時は、GeneratedRegexAttributeを使う
- 正規表現に相当するC#のコードをコンパイル時に自動生成してくれるため、実行コードの高速化につながる

#### ラムダ式にstaticを使う 
- 意図しない変数のキャプチャを防ぐ効果があるため、外部変数を参照しない場合は static を付ける

#### 破棄(_)を使う
- タプルの戻り値の中で使わない値は破棄で受ける
- 使わないラムダ式のパラメータは破棄を利用
- out パラメータの結果を取得しない場合も破棄を利用


## コードレビューの要約
Pull Request Overview の記述の後に、下記のフォーマットでレビューのレポートをコメントに記載してください。

```md
# レビューレポート
## 総評
(レビュー結果全体を簡潔にまとめたもの)

## 良い点
(Pull Requestの修正内容で良かった点を記載)

## 問題点・気になる点
(Pull Requestの修正内容で特に問題になりそうな点を記載)

## セキュリティ上の懸念事項
(特にセキュリティの観点で、注意すべき点を記載)

## E2Eテストで確認したい項目
(修正内容を踏まえて、E2Eテストのテストケースを記載)

```
